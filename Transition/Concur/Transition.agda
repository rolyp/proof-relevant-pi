-- The "residual" of a concurrent pair after a third concurrent transition. See 0.1 release notes.
module Transition.Concur.Transition where

   open import SharedModules

   open import Action as á´¬ using (Action); open á´¬.Action; open á´¬.Actionáµ‡
   open import Action.Concur using (_á´¬âŒ£_; module _á´¬âŒ£_; á´¬âŒ£-sym; á´¬âŠ–); open _á´¬âŒ£_
   open import Action.Concur.Action using (/-preserves-á´¬âŒ£)
   open import Name using (zero)
   open import Proc as á´¾ using (Proc)
   open import Ren as á´¿ using (Ren; push; pop; swap); open á´¿.Renameable â¦ƒ...â¦„
   open import Ren.Properties
   open import Transition as áµ€ using (_â€”[_-_]â†’_); open áµ€._â€”[_-_]â†’_
   open import Transition.Ren using (_*áµ‡; _*á¶œ)
   open import Transition.Concur
      using (Concurâ‚; module Concurâ‚; Concur; Deltaâ€²; module Deltaâ€²; Delta; âŠ–; âŠ–â‚; âŒ£-sym);
      open Concurâ‚; open Deltaâ€²
   open import Transition.Concur.Cofinal using (âŠ–-âœ“-â‹‰)
   open import Transition.Concur.Cofinal.Transition using (âŠ–â€²[_,_]; module _Î”â€²_)
   open import Transition.Concur.Ren using (_*áµ‡áµ‡âŒ£; _*áµ‡á¶œâŒ£; _*á¶œáµ‡âŒ£; _*á¶œá¶œâŒ£)

   -- A "cyclic" version is probably more useful. However for the asymmetric version of the relation, ğ¸â€³
   -- would be mostly uninhabited. TODO: ğ¸/E and E/ğ¸ notation, once I've improved overloading situation.
   postulate
      /-preserves-âŒ£ : âˆ€ {Î“} {P : Proc Î“} {a aâ€² aâ€³ R Râ€² Râ€³} {ğ‘ : a á´¬âŒ£ aâ€²} {ğ‘â€² : aâ€² á´¬âŒ£ aâ€³} {ğ‘â€³ : aâ€³ á´¬âŒ£ a}
                      {E : P â€”[ a - _ ]â†’ R} {Eâ€² : P â€”[ aâ€² - _ ]â†’ Râ€²} {Eâ€³ : P â€”[ aâ€³ - _ ]â†’ Râ€³} â†’
                      (ğ¸ : E âŒ£[ ğ‘ ] Eâ€²) â†’ Eâ€² âŒ£[ ğ‘â€² ] Eâ€³ â†’ (ğ¸â€³ : Eâ€³ âŒ£[ ğ‘â€³ ] E) â†’
                      Eâ€²/E (âŠ– ğ¸) âŒ£[ /-preserves-á´¬âŒ£ ğ‘ ğ‘â€² (á´¬âŒ£-sym ğ‘â€³) ] E/Eâ€² (âŠ– ğ¸â€³)

      -- This would be the correctness property for E\ğ¸, I think.
      /-preserves-cofin :
         âˆ€ {Î“} {P : Proc Î“} {a aâ€² aâ€³ R Râ€² Râ€³} {ğ‘ : a á´¬âŒ£ aâ€²} {ğ‘â€² : aâ€² á´¬âŒ£ aâ€³} {ğ‘â€³ : aâ€³ á´¬âŒ£ a}
         {E : P â€”[ a - _ ]â†’ R} {Eâ€² : P â€”[ aâ€² - _ ]â†’ Râ€²} {Eâ€³ : P â€”[ aâ€³ - _ ]â†’ Râ€³} â†’
         (ğ¸ : E âŒ£[ ğ‘ ] Eâ€²) (ğ¸â€² : Eâ€² âŒ£[ ğ‘â€² ] Eâ€³) (ğ¸â€³ : Eâ€³ âŒ£[ ğ‘â€³ ] E) â†’
         let ğ¸â€²/E = /-preserves-âŒ£ ğ¸ ğ¸â€² ğ¸â€³; ğ¸/Eâ€³ = /-preserves-âŒ£ ğ¸â€³ ğ¸ ğ¸â€²; open _Î”â€²_
         in E/Eâ€² (âŠ– ğ¸â€²/E) â‰… E/Î³ (âŠ–â€²[ ğ‘â€³ , zero ] (Eâ€²/E (âŠ– ğ¸/Eâ€³)) (âŠ–-âœ“-â‹‰ ğ¸â€³))

   -- The residual ğ¸â€²/E. Slight case-explosion because of need to distinguish the Ë£âˆ‡Ë£ and áµ‡âˆ‡áµ‡ cases pairwise.
   /-preserves-âŒ£â‚ : âˆ€ {Î“} {P : Proc Î“} {a aâ€² aâ€³ R Râ€² Râ€³} {ğ‘ : a á´¬âŒ£ aâ€²} {ğ‘â€² : aâ€² á´¬âŒ£ aâ€³} {ğ‘â€³ : a á´¬âŒ£ aâ€³}
                   {E : P â€”[ a - _ ]â†’ R} {Eâ€² : P â€”[ aâ€² - _ ]â†’ Râ€²} {Eâ€³ : P â€”[ aâ€³ - _ ]â†’ Râ€³} â†’
                   (ğ¸ : E âŒ£â‚[ ğ‘ ] Eâ€²) â†’ Eâ€² âŒ£â‚[ ğ‘â€² ] Eâ€³ â†’ (ğ¸â€³ : E âŒ£â‚[ ğ‘â€³ ] Eâ€³) â†’
                   Eâ€²/E (âŠ–â‚ ğ¸) âŒ£â‚[ /-preserves-á´¬âŒ£ ğ‘ ğ‘â€² ğ‘â€³ ] Eâ€²/E (âŠ–â‚ ğ¸â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€¢ ğ¹) (ğ¸â€² â”‚â€¢ ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€¢ ğ¹â€³) = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (_â”‚áµ¥â€¢_ {y = y} ğ¸ ğ¹) (ğ¸â€² â”‚â€¢áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€² ğ¹â€³) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (_â”‚áµ¥â€¢_ {y = y} ğ¸ ğ¹) (ğ¸â€² â”‚â€¢áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥ ğ¹â€³) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)

   /-preserves-âŒ£â‚ (_â”‚â€¢áµ¥_ {y = y} ğ¸ ğ¹) (ğ¸â€² â”‚áµ¥â€¢ ğ¹â€²) (ğ¸â€³ â”‚â€¢ ğ¹â€³) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² = ((pop y) *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³) â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (ğ¸ â”‚â€¢áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚â€¢áµ¥ ğ¹â€³) = (pop _ *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³) â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (ğ¸ â”‚â€¢áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥â€² ğ¹â€²) (ğ¸â€³ â”‚â€¢áµ¥ ğ¹â€³) = ?

   /-preserves-âŒ£â‚ (_â”‚áµ¥áµ‡_ {a = a} ğ¸ F) (_â”‚áµ¥â€¢_ {y = y} ğ¸â€² ğ¹â€²) (ğ¸â€³ â”‚â€¢áµ‡ Fâ€²) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥â€¢ (push *áµ‡á¶œâŒ£) ğ¹â€²
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥áµ‡ F) (ğ¸â€² â”‚áµ¥ ğ¹) (ğ¸â€³ â”‚áµ¥áµ‡ Fâ€²) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥ (push *áµ‡áµ‡âŒ£) ğ¹

   /-preserves-âŒ£â‚ (_â”‚áµ¥á¶œ_ {a = a} ğ¸ F) (_â”‚áµ¥â€¢_ {y = y} ğ¸â€² ğ¹â€²) (ğ¸â€³ â”‚â€¢á¶œ Fâ€²) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³) â”‚áµ¥â€¢ ğ¹â€²
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥á¶œ F) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥á¶œ Fâ€²) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥ ğ¹â€²

   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹) (ğ¸â€² â”‚áµ¥â€¢ ğ¹â€²) (Eâ€² áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸â€² â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹) (ğ¸â€² â”‚áµ¥â€¢ ğ¹â€²) (Eâ€² áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸â€² â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹) (ğ¸ â”‚áµ¥â€² ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚áµ¥â€² /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹) (ğ¸ â”‚áµ¥â€² ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} Eâ€² ğ¹â€³) = ? -- (push *áµ‡áµ‡âŒ£) ğ¸ â”‚áµ¥â€¢ (/-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹) (ğ¸ â”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹) (ğ¸ â”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹) (ğ¸ â”‚áµ¥â€² ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} Eâ€² ğ¹â€³) = ? -- (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹) (ğ¸ â”‚áµ¥â€² ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} Eâ€² ğ¹â€³) = ? -- (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹) (ğ¸ â”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹) (ğ¸ â”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ¥ ğ¹) (ğ¸ â”‚áµ¥â€¢ ğ¹â€²) (Eâ€² á¶œâ”‚â€¢ ğ¹â€³) = ğ¸ â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (Eâ€² á¶œâ”‚áµ¥ ğ¹â€³) = ğ¸â€² â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ¥ ğ¹) _ (Eâ€² â”‚áµ›áµ› ğ¹â€³) = ?

   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€² ğ¹) (_â”‚áµ¥â€¢_ {y = y} ğ¸â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€¢ ğ¹â€³) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€²))
   ... | pop-y*Eâ€²/Eâ€³ = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥ ğ¹) (_â”‚áµ¥â€¢_ {y = y} ğ¸â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€¢ ğ¹â€³) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€²))
   ... | pop-y*Eâ€²/Eâ€³ = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€² ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€² ğ¹â€³) = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€² ğ¹) (ğ¸â€² â”‚áµ¥â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥ ğ¹â€³) = ? -- Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€² ğ¹â€³) = ? -- Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€² ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥ ğ¹â€³) = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥ ğ¹â€³) = ? -- Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€² ğ¹â€³) = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥ ğ¹) (ğ¸â€² â”‚áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥ ğ¹â€³) = Î½á¶œá¶œ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³)
   /-preserves-âŒ£â‚ (ğ¸ â”‚áµ¥â€² ğ¹) (ğ¸â€² â”‚áµ¥â€² ğ¹â€²) (ğ¸â€³ â”‚áµ¥â€² ğ¹â€³) = ?

   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (Eâ€² áµ‡â”‚áµ‡ F) (E á¶œâ”‚áµ‡ .F) = Eâ€²/E (âŠ–â‚ ğ¸) áµ‡â”‚áµ‡ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (Eâ€² áµ‡â”‚á¶œ F) (E á¶œâ”‚á¶œ .F) = Eâ€²/E (âŠ–â‚ ğ¸) áµ‡â”‚á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (ğ¸â€² â”‚â€¢áµ‡ F) (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸â€³ .F) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ‡ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (ğ¸â€² â”‚áµ¥áµ‡ F) (ğ¸â€³ â”‚áµ¥á¶œ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥áµ‡ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ á¶œáµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡áµ‡â”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (ğ¸â€² áµ‡á¶œâ”‚ .Q) (ğ¸â€³ á¶œá¶œâ”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡á¶œâ”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ á¶œáµ‡â”‚ Q) (ğ¸â€² áµ‡á¶œâ”‚ .Q) (ğ¸â€³ áµ›áµ›â”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡á¶œâ”‚ Q

   /-preserves-âŒ£â‚ (P â”‚á¶œáµ‡ ğ¹) (E áµ‡â”‚â€¢ ğ¹â€²) (.E á¶œâ”‚â€¢ ğ¹â€³) = E áµ‡â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œáµ‡ ğ¹) (E áµ‡â”‚áµ¥ ğ¹â€²) (.E á¶œâ”‚áµ¥ ğ¹â€³) = E áµ‡â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œáµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚á¶œáµ‡ ğ¹â€³) = P â”‚áµ‡áµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œáµ‡ ğ¹) (.P â”‚áµ‡á¶œ ğ¹â€²) (.P â”‚á¶œá¶œ ğ¹â€³) = P â”‚áµ‡á¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œáµ‡ ğ¹) (.P â”‚áµ‡á¶œ ğ¹â€²) (.P â”‚áµ›áµ› ğ¹â€³) = ? -- P â”‚áµ‡á¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² á¶œáµ‡â”‚ .Q) (_áµ‡áµ‡â”‚_ {ğ‘ = áµ‡âˆ‡áµ‡} ğ¸â€³ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œáµ‡â”‚ (push *) Q
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² á¶œáµ‡â”‚ .Q) (_áµ‡áµ‡â”‚_ {ğ‘ = Ë£âˆ‡Ë£} ğ¸â€³ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (E á¶œâ”‚áµ‡ F) (Eâ€² áµ‡â”‚áµ‡ .F) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚áµ‡ (push *áµ‡) F
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (E á¶œâ”‚á¶œ F) (Eâ€² áµ‡â”‚á¶œ .F) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚á¶œ (push *á¶œ) F
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² â”‚áµ¥á¶œ F) (ğ¸â€³ â”‚áµ¥áµ‡ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥á¶œ (push *áµ‡) F
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² â”‚â€¢á¶œ F) (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸â€³ .F) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢á¶œ (push *á¶œ) F
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² á¶œá¶œâ”‚ .Q) (ğ¸â€³ áµ‡á¶œâ”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ (ğ¸ áµ‡á¶œâ”‚ Q) (ğ¸â€² áµ›áµ›â”‚ .Q) (ğ¸â€³ áµ‡á¶œâ”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q

   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (.P â”‚á¶œáµ‡ ğ¹â€²) (_â”‚áµ‡áµ‡_ {ğ‘ = áµ‡âˆ‡áµ‡} .P ğ¹â€³) = (push *) P â”‚á¶œáµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (.P â”‚á¶œáµ‡ ğ¹â€²) (_â”‚áµ‡áµ‡_ {ğ‘ = Ë£âˆ‡Ë£} .P ğ¹â€³) = (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (E á¶œâ”‚â€¢ ğ¹â€²) (.E áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡) E á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (E á¶œâ”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} .E ğ¹â€³) = (push *áµ‡) E á¶œâ”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (E á¶œâ”‚áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} .E ğ¹â€³) = (push *áµ‡) E á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (.P â”‚á¶œá¶œ ğ¹â€²) (.P â”‚áµ‡á¶œ ğ¹â€³) = (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ‡á¶œ ğ¹) (.P â”‚áµ›áµ› ğ¹â€²) (.P â”‚áµ‡á¶œ ğ¹â€³) = ? -- (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² á¶œáµ‡â”‚ .Q) (ğ¸â€³ á¶œáµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œáµ‡â”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (E á¶œâ”‚áµ‡ F) (Eâ€² á¶œâ”‚áµ‡ .F) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚áµ‡ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (E á¶œâ”‚á¶œ F) (Eâ€² á¶œâ”‚á¶œ .F) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² â”‚â€¢á¶œ F) (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸â€³ .F) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² â”‚áµ¥á¶œ F) (ğ¸â€³ â”‚áµ¥á¶œ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² á¶œá¶œâ”‚ .Q) (ğ¸â€³ á¶œá¶œâ”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² á¶œá¶œâ”‚ .Q) (ğ¸â€³ áµ›áµ›â”‚ .Q) = ?
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² áµ›áµ›â”‚ .Q) (ğ¸â€³ á¶œá¶œâ”‚ .Q) = ?
   /-preserves-âŒ£â‚ (ğ¸ á¶œá¶œâ”‚ Q) (ğ¸â€² áµ›áµ›â”‚ .Q) (ğ¸â€³ áµ›áµ›â”‚ .Q) = ?

   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² á¶œáµ‡â”‚ .Q) (ğ¸â€³ á¶œáµ‡â”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œáµ‡â”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (E á¶œâ”‚áµ‡ F) (Eâ€² á¶œâ”‚áµ‡ .F) = ? -- Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚áµ‡ F
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (E á¶œâ”‚á¶œ F) (Eâ€² á¶œâ”‚á¶œ .F) = ? -- Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² â”‚â€¢á¶œ F) (ğ¸â€³ â”‚â€¢á¶œ .F) = ? -- (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸â€³ .F) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
--    ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² â”‚áµ¥á¶œ F) (ğ¸â€³ â”‚áµ¥á¶œ .F) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥á¶œ F
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² á¶œá¶œâ”‚ .Q) (ğ¸â€³ á¶œá¶œâ”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² áµ›áµ›â”‚ .Q) (ğ¸â€³ á¶œá¶œâ”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² á¶œá¶œâ”‚ .Q) (ğ¸â€³ áµ›áµ›â”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ Q
   /-preserves-âŒ£â‚ (ğ¸ áµ›áµ›â”‚ Q) (ğ¸â€² áµ›áµ›â”‚ .Q) (ğ¸â€³ áµ›áµ›â”‚ .Q) = ? -- /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ Q

   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (.P â”‚á¶œáµ‡ ğ¹â€²) (.P â”‚á¶œáµ‡ ğ¹â€³) = P â”‚á¶œáµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (E á¶œâ”‚â€¢ ğ¹â€²) (.E á¶œâ”‚â€¢ ğ¹â€³) = _ á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (E á¶œâ”‚áµ¥ ğ¹â€²) (.E á¶œâ”‚áµ¥ ğ¹â€³) = E á¶œâ”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (.P â”‚á¶œá¶œ ğ¹â€²) (.P â”‚á¶œá¶œ ğ¹â€³) = P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (.P â”‚á¶œá¶œ ğ¹â€²) (.P â”‚áµ›áµ› ğ¹â€³) = ?
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (.P â”‚áµ›áµ› ğ¹â€²) (.P â”‚á¶œá¶œ ğ¹â€³) = ?
   /-preserves-âŒ£â‚ (P â”‚á¶œá¶œ ğ¹) (.P â”‚áµ›áµ› ğ¹â€²) (.P â”‚áµ›áµ› ğ¹â€³) = ?

   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (.P â”‚á¶œáµ‡ ğ¹â€²) (.P â”‚á¶œáµ‡ ğ¹â€³) = ? -- P â”‚á¶œáµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (E á¶œâ”‚â€¢ ğ¹â€²) (.E á¶œâ”‚â€¢ ğ¹â€³) = ? -- _ á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (E á¶œâ”‚áµ¥ ğ¹â€²) (.E á¶œâ”‚áµ¥ ğ¹â€³) = ? -- E á¶œâ”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (.P â”‚á¶œá¶œ ğ¹â€²) (.P â”‚á¶œá¶œ ğ¹â€³) = ? -- P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (.P â”‚áµ›áµ› ğ¹â€²) (.P â”‚á¶œá¶œ ğ¹â€³) = ? -- P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (.P â”‚á¶œá¶œ ğ¹â€²) (.P â”‚áµ›áµ› ğ¹â€³) = ? -- P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (P â”‚áµ›áµ› ğ¹) (.P â”‚áµ›áµ› ğ¹â€²) (.P â”‚áµ›áµ› ğ¹â€³) = ? -- P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (E áµ‡â”‚áµ‡ F) (Eâ€² áµ‡â”‚â€¢ ğ¹â€²) (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸ Fâ€²) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² rewrite popâˆ˜push y a = Eâ€²/E (âŠ–â‚ ğ¸) áµ‡â”‚â€¢ (push *áµ‡á¶œâŒ£) ğ¹â€²
   /-preserves-âŒ£â‚ (E áµ‡â”‚áµ‡ F) (Eâ€² áµ‡â”‚áµ¥ ğ¹) (ğ¸ â”‚áµ¥áµ‡ Fâ€²) = Eâ€²/E (âŠ–â‚ ğ¸) áµ‡â”‚áµ¥ (push *áµ‡áµ‡âŒ£) ğ¹
   /-preserves-âŒ£â‚ {ğ‘â€² = áµ‡âˆ‡áµ‡} (E áµ‡â”‚áµ‡ F) (P â”‚áµ‡áµ‡ ğ¹) (.E áµ‡â”‚áµ‡ Fâ€²) = _ â”‚áµ‡áµ‡ (push *áµ‡áµ‡âŒ£) ğ¹
   /-preserves-âŒ£â‚ {ğ‘â€² = Ë£âˆ‡Ë£} (E áµ‡â”‚áµ‡ F) (P â”‚áµ‡áµ‡ ğ¹) (.E áµ‡â”‚áµ‡ Fâ€²) = _ â”‚áµ‡áµ‡ (push *áµ‡áµ‡âŒ£) ğ¹
   /-preserves-âŒ£â‚ (E áµ‡â”‚áµ‡ F) (P â”‚áµ‡á¶œ ğ¹) (.E áµ‡â”‚á¶œ Fâ€²) = _ â”‚áµ‡á¶œ (push *áµ‡á¶œâŒ£) ğ¹

   /-preserves-âŒ£â‚ (E áµ‡â”‚á¶œ F) (P â”‚á¶œáµ‡ ğ¹) (.E áµ‡â”‚áµ‡ Fâ€²) = _ â”‚á¶œáµ‡ (push *á¶œáµ‡âŒ£) ğ¹
   /-preserves-âŒ£â‚ (E áµ‡â”‚á¶œ F) (Eâ€² á¶œâ”‚â€¢ ğ¹â€²) (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸ Fâ€²) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² rewrite popâˆ˜push y a = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚â€¢ (push *á¶œá¶œâŒ£) ğ¹â€²
   /-preserves-âŒ£â‚ (E áµ‡â”‚á¶œ F) (Eâ€² á¶œâ”‚áµ¥ ğ¹) (ğ¸ â”‚áµ¥áµ‡ Fâ€²) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚áµ¥ (push *á¶œáµ‡âŒ£) ğ¹
   /-preserves-âŒ£â‚ (E áµ‡â”‚á¶œ F) (P â”‚á¶œá¶œ ğ¹) (.E áµ‡â”‚á¶œ Fâ€²) = _ â”‚á¶œá¶œ (push *á¶œá¶œâŒ£) ğ¹
   /-preserves-âŒ£â‚ (E áµ‡â”‚á¶œ F) (P â”‚áµ›áµ› ğ¹) (.E áµ‡â”‚á¶œ Fâ€²) = ? -- _ â”‚á¶œá¶œ (push *á¶œá¶œâŒ£) ğ¹

   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ‡ F) (Eâ€² áµ‡â”‚â€¢ ğ¹â€²) (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸â€³ Fâ€²) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = Eâ€²/E (âŠ–â‚ ğ¸â€³) áµ‡â”‚â€¢ ğ¹â€²
   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ‡ F) (Eâ€² áµ‡â”‚áµ¥ ğ¹) (ğ¸ â”‚áµ¥á¶œ Fâ€²) = Eâ€²/E (âŠ–â‚ ğ¸) áµ‡â”‚áµ¥ ğ¹
   /-preserves-âŒ£â‚ {ğ‘â€² = Ë£âˆ‡Ë£} (E á¶œâ”‚áµ‡ F) (P â”‚áµ‡áµ‡ ğ¹) (.E á¶œâ”‚áµ‡ Fâ€²) = _ â”‚áµ‡áµ‡ ğ¹
   /-preserves-âŒ£â‚ {ğ‘â€² = áµ‡âˆ‡áµ‡} (E á¶œâ”‚áµ‡ F) (P â”‚áµ‡áµ‡ ğ¹) (.E á¶œâ”‚áµ‡ Fâ€²) = _ â”‚áµ‡áµ‡ ğ¹
   /-preserves-âŒ£â‚ (E á¶œâ”‚áµ‡ F) (P â”‚áµ‡á¶œ ğ¹â€²) (.E á¶œâ”‚á¶œ Fâ€²) = _ â”‚áµ‡á¶œ ğ¹â€²

   /-preserves-âŒ£â‚ (E á¶œâ”‚á¶œ F) (P â”‚á¶œáµ‡ ğ¹) (.E á¶œâ”‚áµ‡ Fâ€²) = _ â”‚á¶œáµ‡ ğ¹
   /-preserves-âŒ£â‚ (E á¶œâ”‚á¶œ F) (Eâ€² á¶œâ”‚â€¢ ğ¹) (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸ Fâ€²) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² rewrite popâˆ˜push y a = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚â€¢ ğ¹
   /-preserves-âŒ£â‚ (E á¶œâ”‚á¶œ F) (Eâ€² á¶œâ”‚áµ¥ ğ¹) (ğ¸ â”‚áµ¥á¶œ Fâ€²) = Eâ€²/E (âŠ–â‚ ğ¸) á¶œâ”‚áµ¥ ğ¹
   /-preserves-âŒ£â‚ (E á¶œâ”‚á¶œ F) (P â”‚á¶œá¶œ ğ¹â€²) (.E á¶œâ”‚á¶œ Fâ€²) = _ â”‚á¶œá¶œ ğ¹â€²
   /-preserves-âŒ£â‚ (E á¶œâ”‚á¶œ F) (P â”‚áµ›áµ› ğ¹â€²) (.E á¶œâ”‚á¶œ Fâ€²) = ? -- _ â”‚á¶œá¶œ ğ¹â€²

   /-preserves-âŒ£â‚ (ğ¸ â•â‚ Q) (ğ¸â€² â•â‚ .Q) (ğ¸â€³ â•â‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³

   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (E áµ‡â”‚áµ‡ F) (Eâ€² áµ‡â”‚áµ‡ .F) = _ áµ‡â”‚áµ‡ (push *áµ‡) F
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (E áµ‡â”‚áµ‡ F) (Eâ€² áµ‡â”‚áµ‡ .F) = _ á¶œâ”‚áµ‡ (push *áµ‡) F
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (E áµ‡â”‚á¶œ F) (Eâ€² áµ‡â”‚á¶œ .F) = _ áµ‡â”‚á¶œ (push *á¶œ) F
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (E áµ‡â”‚á¶œ F) (Eâ€² áµ‡â”‚á¶œ .F) = _ á¶œâ”‚á¶œ (push *á¶œ) F
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² â”‚áµ¥áµ‡ F) (ğ¸â€³ â”‚áµ¥áµ‡ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥áµ‡ (push *áµ‡) F
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² â”‚áµ¥áµ‡ F) (ğ¸â€³ â”‚áµ¥áµ‡ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚áµ¥á¶œ (push *áµ‡) F
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² â”‚â€¢áµ‡ F) (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸â€³ .F) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€³ rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ‡ (push *á¶œ) F
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² â”‚â€¢áµ‡ F) (ğ¸â€³ â”‚â€¢áµ‡ .F) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢á¶œ (push *á¶œ) F
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = áµ‡âˆ‡áµ‡} {ğ‘â€³ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) =
      /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡áµ‡â”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = áµ‡âˆ‡áµ‡} {ğ‘â€³ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) =
      /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡á¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = Ë£âˆ‡Ë£} {ğ‘â€³ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) =
      /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡áµ‡â”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = Ë£âˆ‡Ë£} {ğ‘â€³ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) =
      /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡á¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {áµ‡âˆ‡áµ‡} {áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œáµ‡â”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {áµ‡âˆ‡áµ‡} {Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {Ë£âˆ‡Ë£} {áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œáµ‡â”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {Ë£âˆ‡Ë£} {Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡áµ‡â”‚ .Q) (ğ¸â€³ áµ‡áµ‡â”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡á¶œâ”‚ .Q) (ğ¸â€³ áµ‡á¶œâ”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ áµ‡á¶œâ”‚ (push *) Q
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (ğ¸ áµ‡áµ‡â”‚ Q) (ğ¸â€² áµ‡á¶œâ”‚ .Q) (ğ¸â€³ áµ‡á¶œâ”‚ .Q) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ á¶œá¶œâ”‚ (push *) Q

   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (E áµ‡â”‚â€¢ ğ¹â€²) (.E áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡) E á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (E áµ‡â”‚â€¢ ğ¹â€²) (.E áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡) E áµ‡â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} .E ğ¹â€³) =
      (push *áµ‡) E áµ‡â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} .E ğ¹â€³) =
      (push *áµ‡) E áµ‡â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} .E ğ¹â€³) =
      (push *áµ‡) E áµ‡â”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} .E ğ¹â€³) =
      (push *áµ‡) E áµ‡â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} .E ğ¹â€³) =
      (push *áµ‡) E á¶œâ”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} .E ğ¹â€³) =
      (push *áµ‡) E á¶œâ”‚áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} .E ğ¹â€³) =
      (push *áµ‡) E á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} E ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} .E ğ¹â€³) =
      (push *áµ‡) E á¶œâ”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€³ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚áµ‡áµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = áµ‡âˆ‡áµ‡} {ğ‘â€³ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚áµ‡á¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} {ğ‘â€² = Ë£âˆ‡Ë£} {ğ‘â€³ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚áµ‡á¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {ğ‘â€² = áµ‡âˆ‡áµ‡} {ğ‘â€³ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚á¶œáµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {ğ‘â€² = áµ‡âˆ‡áµ‡} {ğ‘â€³ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {ğ‘â€² = Ë£âˆ‡Ë£} {ğ‘â€³ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚á¶œáµ‡ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} {ğ‘â€² = Ë£âˆ‡Ë£} {ğ‘â€³ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡áµ‡ ğ¹â€²) (.P â”‚áµ‡áµ‡ ğ¹â€³) =
      (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = áµ‡âˆ‡áµ‡} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡á¶œ ğ¹â€²) (.P â”‚áµ‡á¶œ ğ¹â€³) = (push *) P â”‚áµ‡á¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ {ğ‘ = Ë£âˆ‡Ë£} (P â”‚áµ‡áµ‡ ğ¹) (.P â”‚áµ‡á¶œ ğ¹â€²) (.P â”‚áµ‡á¶œ ğ¹â€³) = (push *) P â”‚á¶œá¶œ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸ F) (ğ¸â€² â”‚â€¢ ğ¹) (_â”‚â€¢áµ‡_ {y = z} {a = .a} ğ¸â€³ Fâ€²)
      with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸)) | (pop z *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€² | pop-y*E/Eâ€³ rewrite popâˆ˜push y a | popâˆ˜push z a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ (push *á¶œá¶œâŒ£) ğ¹
   /-preserves-âŒ£â‚ (_â”‚â€¢áµ‡_ {y = y} {a = a} ğ¸ F) (ğ¸â€² â”‚â€¢áµ¥ ğ¹) (ğ¸â€³ â”‚áµ¥áµ‡ Fâ€²) with (pop y *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ¥ (push *á¶œáµ‡âŒ£) ğ¹

   /-preserves-âŒ£â‚ (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸ F) (_â”‚â€¢_ {x = x} {.y} {u} {z} ğ¸â€² ğ¹) (ğ¸â€³ â”‚â€¢á¶œ Fâ€²)
      with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸)) | (pop y *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€²)) | (pop z *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€²)) | (pop z *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | pop-y*E/Eâ€² | pop-y*Eâ€³/Eâ€² | pop-z*Eâ€²/Eâ€³ | pop-z*E/Eâ€³
      rewrite popâˆ˜push y a | popâˆ˜push u y | popâˆ˜push x z | popâˆ˜push z a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢ ğ¹
   /-preserves-âŒ£â‚ (_â”‚â€¢á¶œ_ {y = y} {a = a} ğ¸ F) (ğ¸â€² â”‚â€¢áµ¥ ğ¹â€²) (ğ¸â€³ â”‚áµ¥á¶œ Fâ€²) with (pop y *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | pop-y*E/Eâ€² rewrite popâˆ˜push y a = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³ â”‚â€¢áµ¥ ğ¹â€²

   /-preserves-âŒ£â‚ (E áµ‡â”‚â€¢ ğ¹) (ğ¸ â”‚â€¢ ğ¹â€²) (Eâ€² áµ‡â”‚â€¢ ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (E áµ‡â”‚â€¢ ğ¹) (ğ¸ â”‚â€¢áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = áµ‡âˆ‡áµ‡} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (E áµ‡â”‚â€¢ ğ¹) (ğ¸ â”‚â€¢áµ¥ ğ¹â€²) (_áµ‡â”‚áµ¥_ {ğ‘ = Ë£âˆ‡Ë£} Eâ€² ğ¹â€³) = (push *áµ‡áµ‡âŒ£) ğ¸ â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (E á¶œâ”‚â€¢ ğ¹) (ğ¸â€² â”‚â€¢ ğ¹â€²) (Eâ€² á¶œâ”‚â€¢ ğ¹â€³) = ğ¸â€² â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (E á¶œâ”‚â€¢ ğ¹) (ğ¸â€² â”‚â€¢áµ¥ ğ¹â€²) (Eâ€² á¶œâ”‚áµ¥ ğ¹â€³) = ğ¸â€² â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (ğ¸ â”‚â€¢ ğ¹) (ğ¸â€² â”‚â€¢ ğ¹â€²) (ğ¸â€³ â”‚â€¢ ğ¹â€³) = (pop _ *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³) â”‚â€¢ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³
   /-preserves-âŒ£â‚ (ğ¸ â”‚â€¢ ğ¹) (ğ¸â€² â”‚â€¢áµ¥ ğ¹â€²) (ğ¸â€³ â”‚â€¢áµ¥ ğ¹â€³) = (pop _ *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³) â”‚â€¢áµ¥ /-preserves-âŒ£â‚ ğ¹ ğ¹â€² ğ¹â€³

   /-preserves-âŒ£â‚ (Î½â€¢ ğ¸) (Î½â€¢ ğ¸â€²) (Î½â€¢ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢ ğ¸) (Î½â€¢áµ‡ ğ¸â€²) (Î½â€¢áµ‡ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢ ğ¸) (Î½â€¢á¶œ ğ¸â€²) (Î½â€¢á¶œ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³

   /-preserves-âŒ£â‚ (Î½â€¢áµ‡ ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½â€¢áµ‡ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢áµ‡ ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½â€¢áµ‡ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢áµ‡ ğ¸) (Î½áµ‡á¶œ ğ¸â€²) (Î½â€¢á¶œ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³

   /-preserves-âŒ£â‚ (Î½â€¢á¶œ ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½â€¢á¶œ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢á¶œ ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½â€¢á¶œ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½â€¢á¶œ ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½â€¢áµ‡ ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³

   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = x â€¢} {a} ğ¸) (Î½áµ‡áµ‡_ {aâ€² = aâ€²} ğ¸â€²) (Î½áµ‡áµ‡ ğ¸â€³)
      with (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push x | swapâˆ˜pushâˆ˜push a | swapâˆ˜pushâˆ˜push aâ€² =
      Î½áµ‡áµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = u â€¢} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = â€¢ y} ğ¸â€³) = Î½áµ‡áµ‡ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = â€¢ u} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = â€¢ y} ğ¸â€³) = Î½áµ‡áµ‡ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = â€¢ u} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = y â€¢} ğ¸â€³) = Î½áµ‡áµ‡ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = u â€¢} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = y â€¢} ğ¸â€³) = Î½áµ‡áµ‡ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = u â€¢} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³) = Î½áµ‡á¶œ (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {aâ€² = â€¢ u} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³) = Î½áµ‡á¶œ (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = x â€¢} ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½áµ‡áµ‡ ğ¸â€³) = Î½Ë£Ë£ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½áµ‡áµ‡ ğ¸â€³) = Î½Ë£Ë£ (swap *áµ‡áµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡ ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³) = Î½áµ‡á¶œ (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = x â€¢} {a} ğ¸) (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸â€²) (Î½áµ‡á¶œ ğ¸â€³)
      with (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push a | swapâˆ˜pushâˆ˜push aâ€² = Î½áµ‡á¶œ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {u â€¢} ğ¸) (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸â€²) (Î½áµ‡á¶œ ğ¸â€³)
      with (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½áµ‡á¶œ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡áµ‡_ {a = â€¢ x} {â€¢ u} ğ¸) (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸â€²) (Î½áµ‡á¶œ ğ¸â€³)
      with (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡á¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½áµ‡á¶œ swap*Eâ€²/ğ¸â€³/E

   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½áµ‡áµ‡ ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E = Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³) = Î½á¶œá¶œ (swap *á¶œá¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸â€²) (Î½áµ‡á¶œ ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *á¶œá¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½á¶œá¶œ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = x â€¢} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E = Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {aâ€² = â€¢ x} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E = Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½Ë£Ë£ ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³) = Î½á¶œá¶œ (swap *á¶œá¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)

   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½áµ‡á¶œ_ {aâ€² = aâ€³} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) | (swap *á¶œá¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² | swapâˆ˜pushâˆ˜push aâ€³ = Î½á¶œá¶œ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½áµ‡á¶œ ğ¸â€³) = ?
   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ ğ¸) (Î½á¶œáµ‡_ {a = a} {aâ€²} ğ¸â€²) (Î½áµ‡áµ‡_ {a = x â€¢} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) |
           (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*E/Eâ€³ | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push a | swapâˆ˜pushâˆ˜push aâ€² =
      Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E

   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {a = â€¢ x} {u â€¢} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) |
           (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*E/Eâ€³ | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½áµ‡áµ‡_ {a = â€¢ x} {â€¢ u} ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *áµ‡) (E/Eâ€² (âŠ–â‚ ğ¸â€³)) | (swap *áµ‡) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) |
           (swap *á¶œáµ‡âŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*E/Eâ€³ | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½á¶œáµ‡ swap*Eâ€²/ğ¸â€³/E
   /-preserves-âŒ£â‚ (Î½áµ‡á¶œ_ {aâ€² = aâ€²} ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½Ë£Ë£ ğ¸â€³)
      with (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸)) | (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³)) | (swap *á¶œ) (Eâ€²/E (âŠ–â‚ ğ¸â€³)) |
           (swap *á¶œá¶œâŒ£) (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   ... | swap*Eâ€²/E | swap*E/Eâ€³ | swap*Eâ€³/E | swap*Eâ€²/ğ¸â€³/E rewrite swapâˆ˜pushâˆ˜push aâ€² = Î½á¶œá¶œ swap*Eâ€²/ğ¸â€³/E

   /-preserves-âŒ£â‚ (Î½á¶œáµ‡_ {a = a} ğ¸) (Î½áµ‡áµ‡ ğ¸â€²) (Î½á¶œáµ‡ ğ¸â€³) with (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸)) | (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | swap*E/Eâ€² | swap*E/Eâ€³ rewrite swapâˆ˜pushâˆ˜push a = Î½áµ‡áµ‡ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œáµ‡_ {a = a} ğ¸) (Î½Ë£Ë£ ğ¸â€²) (Î½á¶œáµ‡ ğ¸â€³) with (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸)) | (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | swap*E/Eâ€² | swap*E/Eâ€³ rewrite swapâˆ˜pushâˆ˜push a = Î½Ë£Ë£ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œáµ‡_ {a = a} ğ¸) (Î½áµ‡á¶œ ğ¸â€²) (Î½á¶œá¶œ ğ¸â€³) with (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸))
   ... | swap*E/Eâ€² rewrite swapâˆ˜pushâˆ˜push a = Î½áµ‡á¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œáµ‡ ğ¸) (Î½áµ‡á¶œ ğ¸â€²) (Î½áµ›áµ› ğ¸â€³) = ?

   /-preserves-âŒ£â‚ (Î½á¶œá¶œ ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½á¶œá¶œ ğ¸â€³) = Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œá¶œ ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½áµ›áµ› ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œá¶œ ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½á¶œá¶œ ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œá¶œ ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½áµ›áµ› ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½áµ›áµ› ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½á¶œá¶œ ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½áµ›áµ› ğ¸) (Î½á¶œá¶œ ğ¸â€²) (Î½áµ›áµ› ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½áµ›áµ› ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½á¶œá¶œ ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½áµ›áµ› ğ¸) (Î½áµ›áµ› ğ¸â€²) (Î½áµ›áµ› ğ¸â€³) = ? -- Î½á¶œá¶œ /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
   /-preserves-âŒ£â‚ (Î½á¶œá¶œ_ {a = a} ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½á¶œáµ‡ ğ¸â€³) with (swap *á¶œ) (E/Eâ€² (âŠ–â‚ ğ¸â€³))
   ... | swap*E/Eâ€³ rewrite swapâˆ˜pushâˆ˜push a = Î½á¶œáµ‡ (/-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³)
   /-preserves-âŒ£â‚ (Î½áµ›áµ› ğ¸) (Î½á¶œáµ‡ ğ¸â€²) (Î½á¶œáµ‡ ğ¸â€³) = ?

   /-preserves-âŒ£â‚ (! ğ¸) (! ğ¸â€²) (! ğ¸â€³) = /-preserves-âŒ£â‚ ğ¸ ğ¸â€² ğ¸â€³
